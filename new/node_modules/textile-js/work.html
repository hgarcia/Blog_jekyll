<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset=utf-8 />
  <title>textile dev test env</title>
<style>
#out, #in, #html, #test {
  min-height: 300px;
  min-width : 300px;
  float : left;
  width : 48%;
}
#html, #in {
  font-family: monospace;
  font-size: 12px;
}
#test {
  font-family: monospace;
  font-size: 10px;

}
#out, #html {
  margin : 0 0 1em 0;
  float : right;
  clear: right;
  border : 1px dotted #ccc;
  background : #eee;
}
table, td, th {
  border : 1px solid #888;
}
</style>
</head>
<body>
<textarea id="in">#(class#id).
#(first) Item 1
##.
##(sub1) Sub item 1
## Sub item 2
#(second) Item 2
##_(sub3) Sub item 3
## Sub item 4

#_(third) Item 3
##_(sub5) Sub item 5
## Sub item 6
</textarea>
<pre id="html"></pre>
<div id="out"></div>
<textarea id="test"></textarea>
<button onclick="toTest()">Make test!</button>
<script src="lib/textile.js"></script>
<script>
function convert ( s ) {
  console.clear();
  ;;;console.log( Date.now() );
  var t = textile.convert( s );
  document.getElementById('out').innerHTML = t;
  document.getElementById('html').innerText = t;
  // console.log( t );
}
_inp = document.getElementById('in');
_inp.onchange = _inp.onpaste = _inp.oninput = function () {
  localStorage.textileDev = this.value;
  convert( this.value );
};
var v = _inp.value;
if ( localStorage.textileDev ) {
  v = localStorage.textileDev;
  _inp.value = v;
}
convert( v );
</script><script>

function toTest () {
  var a = JSON.stringify( _inp.value.trim() );
  a = a.replace( /\\n/g, '\\n\\\n' );

  var b = JSON.stringify( textile.convert( _inp.value ) );
  b = b.replace( /\\n/g, '\\n\\\n' );

  var c = `equal(textile.convert( // the textile

${a}

), // Should output

${b}

, "testname");\n`;

  document.getElementById('test').value = c;
}

/*
var t = textile.convert(

'#(class#id).\n'+
'#(first) Item 1\n'+
'##.\n'+
'##(sub1) Sub item 1\n'+
'## Sub item 2\n'+
'#(second) Item 2\n'+
'##_(sub3) Sub item 3\n'+
'## Sub item 4\n'+
'\n'+
'#_(third) Item 3\n'+
'##_(sub5) Sub item 5\n'+
'## Sub item 6'

);
;;;console.log(t);*/
</script>



</body>
</html>